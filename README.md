# 🌟 Qrystal 모의고사 플랫폼

> 사용자 맞춤형 모의고사를 생성하고 응시할 수 있는 온라인 학습 플랫폼입니다.


## 🚀 프로젝트 소개

Qrystal은 사용자들이 직접 문제를 만들고, 모의고사를 구성하여 다른 사용자들과 공유할 수 있는 학습 플랫폼입니다. 객관식, 주관식, 서술형 등 다양한 유형의 문제를 지원하며, 자동 채점 기능을 통해 즉각적인 피드백을 제공합니다.

<img width="1511" alt="image" src="https://github.com/user-attachments/assets/a4542524-4596-4b43-86c6-8264f67d6250" />


## 🛠 기술 스택

- **Spring Boot 2.7.13**
- **Java 11**
- **MyBatis**
- **Thymeleaf**
- **MySQL 8.0.33**
- **Redis**
- **HTML/CSS/JavaScript**
- **Bootstrap**
- **jQuery**


## 💡 주요 기능

### 1. 사용자 관리
- 이메일 회원가입 및 로그인
- 소셜 로그인(Google, GitHub, Naver)
- 이메일 인증
- 프로필 관리

### 2. 문제 관리
- 다양한 유형의 문제 생성 (객관식, 주관식, 서술형)
- 문제 카테고리 분류
- 공개/비공개 설정
- 문제 태그 관리

### 3. 모의고사 관리
- 커스텀 모의고사 생성
- 문제 난이도 및 배점 설정
- 시간 제한 설정
- 모의고사 공유

### 4. 시험 응시
- 실시간 타이머
- 답안 임시 저장
- 자동 제출

### 5. 채점 및 결과 분석
- 객관식/주관식 자동 채점
- 서술형 수동 채점
- 정답률 및 점수 통계
- 성적 분석 및 시각화

### 6. 관리자 기능
- 사용자 관리
- 카테고리 관리
- 문제 및 모의고사 승인
- 시스템 모니터링

## 📱 화면 구성
### 접속 정보
- 서비스: http://localhost:80
- 관리자: http://localhost:81

### 메인 화면
<img width="1511" alt="image" src="https://github.com/user-attachments/assets/a4542524-4596-4b43-86c6-8264f67d6250" />

### 로그인 화면
<img width="1510" alt="스크린샷 2025-03-03 오후 9 23 00" src="https://github.com/user-attachments/assets/e3ca02a5-1d96-4fb9-a408-2e017a6ea764" />

### 회원가입 화면
<img width="1512" alt="스크린샷 2025-03-03 오후 9 23 29" src="https://github.com/user-attachments/assets/591df47a-b420-467c-9b0b-cfebfb526999" />

### 문제 목록 화면
<img width="1511" alt="image" src="https://github.com/user-attachments/assets/aba96120-6842-4d77-b132-d948283e90a7" />

### 문제 풀이 화면
<img width="1510" alt="스크린샷 2025-03-03 오후 8 52 36" src="https://github.com/user-attachments/assets/f5cfecb9-778b-493d-871d-78392bdf7a6f" />

### 내 문제 화면
<img width="1511" alt="스크린샷 2025-03-03 오후 8 53 56" src="https://github.com/user-attachments/assets/1270bf01-f0a4-41e8-9169-d0cfc76c970e" />

### 새 문제 등록 화면
<img width="1511" alt="스크린샷 2025-03-03 오후 8 55 31" src="https://github.com/user-attachments/assets/adebf3af-3494-41a9-9e03-d1d52db21cad" />

### 새 모의고사 등록 화면
<img width="1510" alt="스크린샷 2025-03-03 오후 9 04 35" src="https://github.com/user-attachments/assets/dc9ab6c6-486a-4860-ad61-18a85299ba87" />

### 모의고사에 문제 추가
<img width="1511" alt="스크린샷 2025-03-03 오후 9 06 19" src="https://github.com/user-attachments/assets/c9c4fe18-1540-4e48-afdf-e63aedced804" />

### 모의고사 목록 화면
<img width="1511" alt="스크린샷 2025-03-03 오후 9 10 22" src="https://github.com/user-attachments/assets/4515e00f-d294-456d-9c58-74b33ee190fa" />

### 내 모의고사 화면
<img width="1511" alt="스크린샷 2025-03-03 오후 9 11 02" src="https://github.com/user-attachments/assets/7bfb1856-9d7c-4a13-adcb-97fb0cf597b9" />

### 모의고사 응시 화면
<img width="1511" alt="스크린샷 2025-03-03 오후 9 11 45" src="https://github.com/user-attachments/assets/abad7c10-b5cb-4a9d-bf00-19021165f18a" />
<img width="1511" alt="스크린샷 2025-03-03 오후 9 12 44" src="https://github.com/user-attachments/assets/ba9715c9-a16a-4593-8887-8c3822795e72" />

### 결과 화면
<img width="1511" alt="스크린샷 2025-03-03 오후 9 13 53" src="https://github.com/user-attachments/assets/ddf8b8be-338c-4fef-9bf1-0434fa6a9b40" />

### 내 프로필 및 통계 화면
<img width="1512" alt="스크린샷 2025-03-03 오후 9 15 01" src="https://github.com/user-attachments/assets/3e740161-74ab-4a4a-991d-faa3e2e32beb" />

### 관리자 로그인 화면
<img width="1510" alt="스크린샷 2025-03-03 오후 9 27 33" src="https://github.com/user-attachments/assets/dc7fa876-c0ae-4a36-9964-bb10c9f59806" />

### 관리자 대시보드 화면
<img width="1511" alt="image" src="https://github.com/user-attachments/assets/669a00b8-e5d3-4060-92a1-aed3cb64b635" />

### 관리자 관리 화면
<img width="1511" alt="image" src="https://github.com/user-attachments/assets/1834e963-ae4b-4139-a2df-837bdd9dd1df" />

### 사용자 관리 화면
<img width="1510" alt="스크린샷 2025-03-03 오후 9 44 37" src="https://github.com/user-attachments/assets/c7ca3b5c-3618-4cd8-a760-c9084025def2" />

### 카테고리 관리 화면
<img width="1509" alt="image" src="https://github.com/user-attachments/assets/3b033186-b4b3-4c47-92f2-3a16d5c68900" />

## 🔧 설치 및 실행 방법

### 사전 요구사항
- Java 11 이상
- MySQL 8.0
- Redis
- Gradle 7.6 이상

### 설치 방법

1. 저장소 클론
```bash
git clone https://github.com/Tae4an/qrystal.git
```

2. 데이터베이스 설정
```sql
CREATE DATABASE qrystal;

-- 유저 테이블
CREATE TABLE users (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(100) NOT NULL UNIQUE,
    password VARCHAR(100) NOT NULL,
    name VARCHAR(50) NOT NULL,
    role VARCHAR(20) NOT NULL DEFAULT 'USER',
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE',
    provider VARCHAR(20),
    provider_id VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 관리자 테이블
CREATE TABLE admins (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    admin_id VARCHAR(50) NOT NULL UNIQUE,       -- 관리자 아이디
    password VARCHAR(100) NOT NULL,             -- 암호화된 비밀번호
    name VARCHAR(50) NOT NULL,                  -- 관리자 이름
    role VARCHAR(20) NOT NULL,                  -- SUPER_ADMIN, ADMIN
    status VARCHAR(20) NOT NULL,                -- ACTIVE, INACTIVE
    last_login_at TIMESTAMP,                    -- 마지막 로그인 시간
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);

-- 카테고리 테이블 (계층형)
CREATE TABLE categories (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    parent_id BIGINT,                  -- 상위 카테고리 (null이면 최상위)
    name VARCHAR(100) NOT NULL,        -- 카테고리명 
    description TEXT,                  -- 설명
    level INT NOT NULL,               -- 계층 레벨 (1: 대분류, 2: 중분류, 3: 소분류)
    ordering INT DEFAULT 0,           -- 정렬 순서
    status VARCHAR(20) NOT NULL DEFAULT 'ACTIVE',  -- ACTIVE, INACTIVE
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (parent_id) REFERENCES categories(id)
);

-- 문제 유형 테이블
CREATE TABLE question_types (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL,          -- 객관식, 주관식, 서술형
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 문제 테이블
CREATE TABLE questions (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    category_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    type_id BIGINT NOT NULL,
    title VARCHAR(200) NOT NULL,        -- 문제 제목
    content TEXT NOT NULL,              -- 문제 내용
    answer TEXT NOT NULL,               -- 정답
    explanation TEXT,                   -- 해설
    difficulty INT NOT NULL,            -- 난이도 (1-5)
    is_public BOOLEAN DEFAULT true,     -- 공개/비공개
    status VARCHAR(20) NOT NULL,        -- ACTIVE, INACTIVE, REPORTED
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES categories(id),
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (type_id) REFERENCES question_types(id)
);

-- 객관식 보기 테이블
CREATE TABLE question_choices (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    question_id BIGINT NOT NULL,
    choice_number INT NOT NULL,         -- 보기 번호
    content TEXT NOT NULL,              -- 보기 내용
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (question_id) REFERENCES questions(id)
);

-- 태그 테이블
CREATE TABLE tags (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- 문제-태그 매핑 테이블
CREATE TABLE question_tags (
    question_id BIGINT NOT NULL,
    tag_id BIGINT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (question_id, tag_id),
    FOREIGN KEY (question_id) REFERENCES questions(id),
    FOREIGN KEY (tag_id) REFERENCES tags(id)
);

-- 시험지 테이블
CREATE TABLE exams (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200) NOT NULL,       -- 시험지명
    description TEXT,                  -- 시험 설명
    time_limit INT NOT NULL,          -- 제한시간(분)
    total_points INT NOT NULL,        -- 총점
    created_by BIGINT NOT NULL,       -- 작성자
    category_id BIGINT NOT NULL,      -- 카테고리
    status VARCHAR(20) NOT NULL,      -- DRAFT, PUBLISHED, CLOSED
    is_public BOOLEAN DEFAULT TRUE,    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES categories(id),
    FOREIGN KEY (created_by) REFERENCES users(id)
);

-- 시험지-문제 매핑 테이블
CREATE TABLE exam_questions (
    exam_id BIGINT NOT NULL,
    question_id BIGINT NOT NULL,
    question_number INT NOT NULL,      -- 문제 번호
    point INT NOT NULL,               -- 배점
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (exam_id, question_id),
    FOREIGN KEY (exam_id) REFERENCES exams(id),
    FOREIGN KEY (question_id) REFERENCES questions(id)
);

-- 시험 응시 테이블 수정
CREATE TABLE exam_attempts (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    exam_id BIGINT NOT NULL,
    user_id BIGINT NOT NULL,
    start_time TIMESTAMP NOT NULL,     -- 시작 시간
    end_time TIMESTAMP,               -- 종료 시간
    submitted_at TIMESTAMP,           -- 제출 시간
    time_limit INT NOT NULL,          -- 시험 제한시간(분)
    total_score INT,                  -- 획득 점수
    status VARCHAR(20) NOT NULL,      -- READY, IN_PROGRESS, SUBMITTED, GRADED, TIMEOUT
    is_time_expired BOOLEAN DEFAULT FALSE, -- 시간 초과 여부
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (exam_id) REFERENCES exams(id),
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- 답안 제출 테이블
CREATE TABLE exam_answers (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    attempt_id BIGINT NOT NULL,
    question_id BIGINT NOT NULL,
    question_type_id BIGINT NOT NULL,    -- 문제 유형 (객관식/주관식/서술형)
    submitted_answer TEXT NOT NULL,       -- 제출한 답안
    is_correct BOOLEAN,                   -- 정답 여부
    score INT,                           -- 획득 점수
    grading_comment TEXT,                -- 채점 코멘트 (서술형용)
    is_graded BOOLEAN DEFAULT FALSE,     -- 채점 완료 여부
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (attempt_id) REFERENCES exam_attempts(id),
    FOREIGN KEY (question_id) REFERENCES questions(id),
    FOREIGN KEY (question_type_id) REFERENCES question_types(id)
);
```

3. 애플리케이션 설정
`application.properties` 파일에서 데이터베이스 및 Redis 연결 정보 설정

4. 빌드 및 실행
```bash
./gradlew clean build
java -jar build/libs/qrystal-1.0.0.jar
```

## 📘 API 문서

API 문서는 Swagger UI를 통해 확인할 수 있습니다:
```
http://localhost:80/swagger-ui/index.html
```
<img width="1512" alt="스크린샷 2025-03-03 오후 9 25 01" src="https://github.com/user-attachments/assets/aead20b7-5295-4615-ade9-931b8c3e6e2e" />
