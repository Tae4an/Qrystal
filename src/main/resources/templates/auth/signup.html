<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<th:block th:fragment="content">
    <!-- CSS -->
    <th:block th:with="cdnUrl=${@environment.getProperty('cdn.url')}">
        <link rel="stylesheet" type="text/css"
              th:href="${(cdnUrl != null and cdnUrl != '') ? cdnUrl + '/css/signup.css' : @{/css/signup.css}}">
    </th:block>

    <main class="signup-container">
        <h2>회원가입</h2>
        <form th:action="@{/auth/signup}" th:object="${userSignupRequest}" method="post" id="signupForm">
            <div class="form-group">
                <label for="email">이메일</label>
                <div class="email-group">
                    <input type="email" th:field="*{email}" id="email" class="email-input"/>
                    <button type="button" id="verifyEmailBtn" class="btn btn-secondary">이메일 인증</button>
                </div>
                <span id="emailValidation" class="error-message" style="display: none"></span>
                <span id="emailStatus" class="status-message"></span>
                <div id="verificationArea" class="verification-area" style="display: none;">
                    <input type="text" id="verificationCode" placeholder="인증코드 6자리 입력" maxlength="6"/>
                    <span id="verificationTimer" class="timer"></span>
                    <button type="button" id="verifyCodeBtn" class="btn btn-secondary">확인</button>
                    <span id="verificationStatus" class="status-message"></span>
                </div>
            </div>
            <div class="form-group">
                <label for="password">비밀번호</label>
                <input type="password" th:field="*{password}" id="password" />
                <span th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error-message"></span>
                <span id="passwordGuide" class="guide-message">8자 이상, 영문, 숫자, 특수문자를 포함해주세요.</span>
            </div>
            <div class="form-group">
                <label for="passwordConfirm">비밀번호 확인</label>
                <input type="password" id="passwordConfirm" name="passwordConfirm" />
                <span id="passwordMatch" class="status-message"></span>
            </div>
            <div class="form-group">
                <label for="name">이름</label>
                <input type="text" th:field="*{name}" id="name" />
                <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}" class="error-message"></span>
            </div>
            <div class="button-group">
                <button type="submit" class="btn btn-primary" id="signupBtn">가입하기</button>
                <a th:href="@{/auth/login}" class="btn btn-secondary">로그인으로 돌아가기</a>
            </div>
        </form>
    </main>

    <!-- JavaScript -->
    <th:block th:with="cdnUrl=${@environment.getProperty('cdn.url')}">
        <script th:src="${(cdnUrl != null and cdnUrl != '') ? cdnUrl + '/js/signup.js' : @{/js/signup.js}}"></script>
    </th:block>
</th:block>
</body>
</html>